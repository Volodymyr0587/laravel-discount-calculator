## üß† –ó–∞–≤–¥–∞–Ω–Ω—è: –°–∏—Å—Ç–µ–º–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –∑–Ω–∏–∂–∫–∏ –¥–ª—è —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—É

### üéØ –ú–µ—Ç–∞

–†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ **—Å–µ—Ä–≤—ñ—Å –∫–ª–∞—Å**, —è–∫–∏–π —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î **—Ñ—ñ–Ω–∞–ª—å–Ω—É —Å—É–º—É –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è** –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º:

* –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ç–æ–≤–∞—Ä—ñ–≤
* –∑–∞–≥–∞–ª—å–Ω–æ—ó —Å—É–º–∏
* —Ç–∏–ø—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
* –∫—É–ø–æ–Ω–∞
* –¥–æ—Å—Ç–∞–≤–∫–∏

---

## üì¶ –í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ (Order)

–Ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑ —Ç–∞–∫–∏–º–∏ –¥–∞–Ω–∏–º–∏:

```php
$orderData = [
    'items' => [
        ['price' => 1200, 'qty' => 2],
        ['price' => 500,  'qty' => 1],
    ],
    'user_type' => 'regular', // guest | regular | vip
    'coupon' => 'SALE10',     // null –∞–±–æ –∫–æ–¥
    'delivery_type' => 'courier', // pickup | courier
];
```

---

## üìê –ü—Ä–∞–≤–∏–ª–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É

### 1Ô∏è‚É£ –ë–∞–∑–æ–≤–∞ —Å—É–º–∞

```
total = sum(price * qty)
```

---

### 2Ô∏è‚É£ –ó–Ω–∏–∂–∫–∞ –∑–∞ —Ç–∏–ø–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

| –¢–∏–ø     | –ó–Ω–∏–∂–∫–∞ |
| ------- | ------ |
| guest   | 0%     |
| regular | 5%     |
| vip     | 10%    |

---

### 3Ô∏è‚É£ –ö—É–ø–æ–Ω–∏

| –ö—É–ø–æ–Ω   | –£–º–æ–≤–∞             | –ó–Ω–∏–∂–∫–∞  |
| ------- | ----------------- | ------- |
| SALE10  | —è–∫—â–æ total ‚â• 1000 | ‚àí10%    |
| FIXED50 | —è–∫—â–æ total ‚â• 500  | ‚àí50 –≥—Ä–Ω |

‚ö†Ô∏è **–ö—É–ø–æ–Ω –Ω–µ –ø—Ä–∞—Ü—é—î, —è–∫—â–æ —É–º–æ–≤–∞ –Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–∞**

---

### 4Ô∏è‚É£ –î–æ—Å—Ç–∞–≤–∫–∞

| –¢–∏–ø     | –í–∞—Ä—Ç—ñ—Å—Ç—å                           |
| ------- | ---------------------------------- |
| pickup  | 0                                  |
| courier | 80 –≥—Ä–Ω                             |
| courier | **–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ**, —è–∫—â–æ total ‚â• 2000 |

---

### 5Ô∏è‚É£ –û–±–º–µ–∂–µ–Ω–Ω—è

* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —Å—É–º–∞—Ä–Ω–∞ –∑–Ω–∏–∂–∫–∞ ‚Äî **30%**
* –§—ñ–Ω–∞–ª—å–Ω–∞ —Å—É–º–∞ **–Ω–µ –º–æ–∂–µ –±—É—Ç–∏ < 0**

---

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –≤–∏–º–æ–≥–∏

### ‚úÖ –û–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ:

* **OrderCalculatorService**
* –æ–∫—Ä–µ–º—ñ –º–µ—Ç–æ–¥–∏:

  * `calculateBaseTotal()`
  * `applyUserDiscount()`
  * `applyCoupon()`
  * `calculateDeliveryCost()`
  * `getFinalTotal()`

üìÅ –†–æ–∑–º—ñ—Å—Ç–∏ —Å–µ—Ä–≤—ñ—Å —É:

```
app/Services/OrderCalculatorService.php
```

---

## üî¢ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```php
$calculator = new OrderCalculatorService($orderData);

$result = $calculator->getFinalTotal();

/*
[
  'base_total' => 2900,
  'discount' => 580,
  'delivery' => 0,
  'final_total' => 2320,
]
*/
```

---

## üî• –î–æ–¥–∞—Ç–∫–æ–≤—ñ —É—Å–∫–ª–∞–¥–Ω–µ–Ω–Ω—è (–Ω–µ–æ–±–æ–≤ º—è–∑–∫–æ–≤–æ)

1. –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ **Enum** –¥–ª—è:
   * user type
   * delivery type
2. –î–æ–¥–∞—Ç–∏ **–≤–∞–ª—ñ–¥–∞—Ü—ñ—é** –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
3. –ü–æ–∫—Ä–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å **Pest-—Ç–µ—Å—Ç–∞–º–∏**
4. –ó—Ä–æ–±–∏—Ç–∏ `DiscountStrategy` (–ø–∞—Ç–µ—Ä–Ω Strategy)

---

